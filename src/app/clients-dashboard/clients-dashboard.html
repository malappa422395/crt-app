<div>
    <div>
        <div class="flex flex-row items-center justify-center gap-2 mt-4">
            <div class="font-bold self-center">
                Please select category
            </div>
            <div class="flex flex-row gap-2">
                <div *ngFor="let category of categoryTypes" class="field-checkbox">
                    <p-radiobutton [inputId]="category.key" name="category" [value]="category"
                        [(ngModel)]="categoryType" />
                    <label [for]="category.key" class="ml-2">{{ category.name }}</label>
                </div>
            </div>
        </div>
    </div>
    <div class="card" *ngIf="categoryType?.name === 'Clients'">
        <div class="flex flex-row items-center justify-center gap-2 mt-4">
            <div class="font-bold self-center">
                Search By Account / Client:
            </div>
            <div class="flex flex-row gap-2">
                <div>
                    <input type="text" pInputText placeholder="Search By Account / Client Name" [(ngModel)]="searchText"
                        class="w-68" />
                </div>
                <div>
                    <button pButton type="button" icon="pi pi-search" label="Search" (click)="applySearch()"></button>
                </div>
                <div>
                    <button pButton type="button" icon="pi pi-refresh" label="Refresh" (click)="reloadDataDefault()"></button>
                </div>
            </div>
        </div>

        <div>
            <ng-container *ngIf="products$ | async as products; else loading">
                <p-table [value]="products" stripedRows [tableStyle]="{'min-width': '50rem'}" [paginator]="true"
                    [rows]="5" [rowsPerPageOptions]="[5, 10, 20]" selectionMode="single"
                    [(selection)]="selectedProducts" dataKey="clientId">
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="clientFirstName">First Name</th>
                            <th pSortableColumn="clientLastName">Last Name</th>
                            <th pSortableColumn="clientTelNumber">Telephone Number</th>
                            <th pSortableColumn="fas[0].faNum">FA Number</th>
                            <th pSortableColumn="fas[0].faDisplayName">FA Name</th>
                        </tr>
                        <tr>
                            <th>
                                <p-columnFilter type="text" field="clientFirstName" placeholder="Search By First Name"
                                    ariaLabel="Filter Client First Name" filterOn="input"></p-columnFilter>
                            </th>
                            <th>
                                <p-columnFilter type="text" field="clientLastName" placeholder="Search By Last Name"
                                    ariaLabel="Filter Client Last Name"></p-columnFilter>
                            </th>
                            
                            <th>
                                <p-columnFilter type="text" field="clientTelNumber" placeholder="Search By Telephone Number"
                                    ariaLabel="Filter Client Telephone Number"></p-columnFilter>
                            </th>
                            <th>
                                <p-columnFilter type="text" field="fas[0].faNum" placeholder="Search By FA Number"
                                    ariaLabel="Filter FA Number"></p-columnFilter>
                            </th>
                            <th>
                                <p-columnFilter type="text" field="fas[0].faDisplayName"
                                    placeholder="Search By FA Name"
                                    ariaLabel="Filter FA Name"></p-columnFilter>
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-product>
                        <tr [pSelectableRow]="product">
                            <td>{{product.clientFirstName ?? '--'}}</td>
                            <td>{{product.clientLastName ?? '--'}}</td>
                            <td>{{product.clientTelNumber ?? '--'}}</td>
                            <td>{{product.fas[0].faNum ?? '--'}}</td>
                            <td>{{product.fas[0].faDisplayName ?? '--'}}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </ng-container>
            <ng-template #loading>
                <p>Data is loading</p>
            </ng-template>
            <div class="card mt-4">
                <app-accounts-layout-component [selectedProducts]="selectedProducts"></app-accounts-layout-component>
            </div>
        </div>

    </div>
    <div class="card" *ngIf="categoryType?.name === 'Prospects'">
        <app-prospect-dashboard></app-prospect-dashboard>
    </div>
</div>